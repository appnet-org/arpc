syntax = "proto3";

package Test;
option go_package = "./Test";

import "google/protobuf/descriptor.proto";

// One tag: present+true => PUBLIC, else PRIVATE by default.
extend google.protobuf.FieldOptions {
  bool is_public = 50001;
}

// 1. Fixed length scalar types
message Fixed {
  int32  f_int32  = 1 [(Test.is_public) = true];
  int64  f_int64  = 2;
  uint32 f_uint32 = 3 [(Test.is_public) = true];
  uint64 f_uint64 = 4;
  bool   f_bool   = 5 [(Test.is_public) = true];
  float  f_float  = 6;
  double f_double = 7 [(Test.is_public) = true];
}

// 2. Variable length scalar types
message Var {
  string v_string = 1 [(Test.is_public) = true];
  bytes  v_bytes  = 2;
}

// 3. Repeated fixed length types
message RepeatedFixed {
  repeated int32  r_int32  = 1;
  repeated int64  r_int64  = 2 [(Test.is_public) = true];
  repeated uint32 r_uint32 = 3;
  repeated uint64 r_uint64 = 4 [(Test.is_public) = true];
  repeated float  r_float  = 5;
  repeated double r_double = 6 [(Test.is_public) = true];
  repeated bool   r_bool   = 7;
}

// 4. Repeated variable length types
message RepeatedVar {
  repeated string r_string = 1 [(Test.is_public) = true];
  repeated bytes  r_bytes  = 2;
}

// 5. Nested messages (Deep Nesting)
message Leaf {
  int32  leaf_id  = 1 [(Test.is_public) = true];
  string leaf_val = 2;
}

message Level2 {
  Leaf leaf = 1 [(Test.is_public) = true];
}

message Level1 {
  Level2 l2      = 1;
  string l1_data = 2 [(Test.is_public) = true];
}

message Root {
  Level1 l1      = 1 [(Test.is_public) = true];
  int32  root_id = 2;
}

// 6. Complex Mixed
message ComplexMixed {
  int32        f_int32          = 1;                     // private
  string       v_string         = 2 [(Test.is_public) = true];
  repeated int64 r_int64        = 3;                     // private
  Leaf         nested_leaf      = 4 [(Test.is_public) = true];
  repeated string r_string      = 5;                     // private
  bool         f_bool           = 6 [(Test.is_public) = true];
  repeated Root repeated_nested = 7;                     // private
  bytes        v_bytes          = 8 [(Test.is_public) = true];
}

// 7. Empty message
message Empty {}
